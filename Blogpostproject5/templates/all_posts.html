{% extends 'base.html' %}

{% block content %}

<section class="text-gray-600 body-font">
    <div class="container px-5 py-24 mx-auto">
      
      <div class="flex flex-wrap w-full mb-20">
        <div class="lg:w-1/2 w-full mb-6 lg:mb-0">
          <h1 class="sm:text-3xl text-2xl font-medium title-font mb-2 text-gray-900">
            All weapons </h1>
          <div class="h-1 w-20 bg-green-900 rounded"></div>
        </div>
      </div>
      
      <div class="flex flex-wrap -m-4">
       {% for post in posts %}  
        <div class="xl:w-1/4 md:w-1/2 p-4">
          <div class="bg-[#BFB8A6] p-6 rounded-lg">
            <img class="h-40 rounded w-full object-cover object-center mb-6" src="{{ post.thumbnail.url }}" alt="content">

      
        <!--favourite-->    
<div class="flex items-center justify-between mb-3 py-2 px-1 border-b border-[#1B4D3E]">
    <a href="{% url 'post_detail' post.slug %}"
       class="text-lg text-[#1A2E35] font-bold uppercase tracking-tight hover:text-[#1B4D3E] transition-colors">
        {{ post.title }}
    </a>

    {% if user.is_authenticated %}
    <form method="POST" action="{% url 'toggle_favorite' post.slug %}" class="inline-flex">
        {% csrf_token %}
        <button type="submit" class="group focus:outline-none p-1.5 rounded-md hover:bg-[#BFB8A6] transition-all flex items-center justify-center border border-transparent hover:border-[#BFB8A6]" 
                title="{% if user in post.favorites.all %}Remove from favorites{% else %}Add to favorites{% endif %}">
            
            {% if user in post.favorites.all %}
                <svg class="w-6 h-6 text-[#1B4D3E] drop-shadow-sm" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path>
                </svg>
            {% else %}
                <svg class="w-6 h-6 text-[#1B4D3E] opacity-40 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
            {% endif %}
        </button>
    </form>
    {% endif %}
</div>
<!--favourite-->
            <h3 class="tracking-widest text-pink-500 text-xs font-medium title-font">
            </h3>
            <a href="{% url 'post' post.slug %}" h2 class="text-lg text-gray-900 font-medium title-font mb-4">
              </a>

              
            <p class="leading-relaxed text-base">
              {{ post.overview }}</p>
          </div>
        </div>
       {% endfor %}


      
     
      </div>
    </div>
</section>
{% endblock content %}